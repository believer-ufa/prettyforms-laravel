PrettyForms for Laravel 5
===========

Компонент, который позволяет легко создавать и обрабатывать различные формы для вашего сайта.

## Введение
Все мы знаем о том объёме рутинной работы, который необходимо каждый раз проделывать тогда, когда нам необходимо создать и обработать определённую форму на странице сайта. Возьмём пару примеров:
- страница изменения параметров профиля в личном кабинете
- страница установки нового пароля для пользователя
- множество однотипных форм для создания/редактирования данных в разделах админки
- страница создания новой заявки к Support'у вашей системы
- и так далее.

Все эти формы объединяет одно общее свойство: они довольно простые и очень сильно похожи друг на друга с точки зрения реализации: создать метод в контроллере, создать view-шаблон, организовать валидацию данных, пихнуть эти данные в какую-то модель.. Боль, рутина, скукота. Сколько раз это надо проделать на большом проекте? На начальных стадиях проблему часто решают скаффолдингом, но ведь впоследствии весь этот "наскаффолденный" код надо еще и поддерживать, изменять и дорабатывать. Вот поэтому я и написал эту библиотеку, сильно сокращающую то количество ресурсов, которое необходимо для создания и поддержки подобных форм.

### Установка

Прежде всего, установите компонент, выполнив в терминале следующую команду:
```bash
composer require "believer-ufa/prettyforms-laravel:~0.1"
```
#### Добавьте необходимые сервис-провайдеры
PrettyForms зависит от компонента `illuminate/html` и подтягивает его за собой во время установки, поэтому вам необходимо подключить к вашему приложению также сервис-провайдер и фасады данного компонента. Чтобы сделать это, добавьте в ваш конфигурационнный файл `config/app.php` следующие строки:
```php
return [
  'providers' => [
  	    // ... ваши сервис-провайдеры
        'Illuminate\Html\HtmlServiceProvider',
        'PrettyFormsLaravel\ServiceProvider',
  ],
  
  'aliases' => [
        // ... ваши фасады
        'Form'        => 'Illuminate\Html\FormFacade',
        'HTML'        => 'Illuminate\Html\HtmlFacade',
  ],
];  
```

#### Настройте Exception Handler
Вам необходимо доработать ваш Exception Handler так, чтобы он научился корректно реагировать на новый тип ошибок: ошибок валидации сохранения Prettyforms-формы. Чтобы сделать это, добавьте в начало метода `render()` вашего класса `App\Exceptions\Handler` следующий код:
```php
// подключим новую зависимость к классу
use PrettyFormsLaravel\Validation\ValidatorException;

class Handler extends ExceptionHandler {
    public function render($request, Exception $e)
    {
        if ($e instanceof ValidatorException)
        {
            return pf_validation_errors_answer($e);
        }
        
        // остальной код данного метода...
    }
}
```
#### Подключите трейты к контроллерам и моделям

Подключите к вашему главному контроллеру трейт `PrettyFormsLaravel\Http\FormProcessLogic`. Таким образом, ваш главный контроллер должен выглядеть примерно так:
```php
use PrettyFormsLaravel\Http\FormProcessLogic;

abstract class Controller extends BaseController {

  use DispatchesCommands,
      ValidatesRequests,
      FormProcessLogic;

   // код вашего родительского контроллера
}
```

Далее, подключите два дополнительных трейта к той модели, для работы с которой вы намереваетесь создавать форму, магический метод `__toString()`, который будет возвращать наименование для модели: оно будет использоваться при отображении форм. Код вашей модели должен выглядеть примерно так:
```php
use PrettyFormsLaravel\FormSavesLogic;
use PrettyFormsLaravel\Validation\ValidatorTrait;

class Hobbie extends Model {

    // подключаем нужные трейты
    use SoftDeletes, FormSavesLogic, ValidatorTrait;

    function __toString() {
        return $this->title;
    }
  
    // остальной код вашей модели
}
```

Теперь вся подготовительная работа по настройке завершена, и мы можем начать создавать нашу первую форму. Нам необходимо создать контроллер, который будет содержать всю основную логику работы с формой. Для примера, вы можем создать контроллер для редактирования наши хобби:

```php

// написать пример контроллера

```
